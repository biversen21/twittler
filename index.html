<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
		<script src='moment.js'></script>
		<link rel="Stylesheet" href='styles.css' type='text/css'>
  </head>
  <body>
		<h1 class='title'>Twittler App</h1>
		<div class='feedContainer'>
			<h4 class='feedTitle'>All Users Feed</h4>
			<div class='container'></div>
		</div>
		<button type='button' class='feedBtn'>Single Refresh</button>
    <script>

      $(document).ready(function(){
        var $body = $('.container');
        $body.html('');

        var index = streams.home.length - 1;
				var origIndex = index // Store original index of first list
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message + ' created at: ' + moment(tweet.created_at).fromNow());
          $tweet.appendTo($body);
          index -= 1;
        }
				
				// Function to reload new tweets
				var newTweets = function() {
					$body.html('');
	        var index = streams.home.length - 1;
					var origIndex = index  // Store original index of first list
	        while(index >= 0){
	          var tweet = streams.home[index];
	          var $tweet = $('<div></div>');
            $tweet.text('@' + tweet.user + ': ' + tweet.message + ' created at: ' + moment(tweet.created_at).fromNow());
	          $tweet.appendTo($body);
	          index -= 1;
					}
				}
				
				$('.feedBtn').on('click', newTweets);
      });

    </script>
  </body>
</html>